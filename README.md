# File Sharing

## Description

This is a file sharing web application that allows users to upload and share files. 

## Setup

1. Clone the repository: `git clone https://github.com/requiemformemories/file_sharing_rails.git`
2. Build the Docker image: `docker build -t file-sharing-rails .`
3. 
4. Run the Docker container: `docker run -p 3000:3000 -file-sharing-rails ./bin/rails server`. If you need to change the binding address, you may provide it with RAILS_SERVER_BIND_ADDRESS environment variable.

## Usage

In the Postman directory, there is a provided file named `postman/file_sharing_postman_collection.json` that can be imported into Postman, allowing the use of Postman to make API calls.

These operations can be operated with API calls:
- ListBucket
- CreateBucket
- DeleteBucket
- ListObject
- GetObject
- PutObject
- DeleteObject
- Access Keys
- ListAccessKeys
- CreateAccessKey
- RevokeAccessKey

All operations can be authenticated via HTTP Basic Auth. For testing purposes, you can use the account credentials generated by the seed (username: admin, password: password).

GetObject, PutObject, and DeleteObject can be authenticated through a pre-signed URL. If you need a tool to generate pre-signed URLs, the PresignUrlGenerator in the codebase can be useful for the purpose.

You can generate a GetObject url like this:

```ruby
file_object = FileObject.find('...') 
access_key = AccessKey.find('...') 

PresignUrlGenerator.new(
  host: '<hostname>', 
  access_key: access_key,
  bucket_name: file_object.bucket.name, 
  key: file_object.key, 
  action: 'download', 
  expired_at: 5.day.after.iso8601).generate
```




